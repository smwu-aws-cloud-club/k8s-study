# MSA와 Spring Cloud

## 1. MSA란?

- Microservice Architecture
- 하나의 시스템을 여러 개의 작은 서비스로 나눠서 구성
- 각 서비스는 독립적으로 배포, 실행, 확장 가능
- 기능 단위로 쪼개기 때문에 유지보수와 확장성 측면에서 유리
- 각 서비스는 자체 DB, 자체 로직을 가지며 다른 서비스와는 API 또는 메시징으로 통신

---

## 2. Monolith vs MSA

- Monolith: 하나의 애플리케이션 안에 모든 기능이 포함되어 있음
- MSA: 기능별로 나눠서 독립적인 서비스들로 운영

- Monolith는 배포와 테스트가 단순하지만, 덩치가 커질수록 유지보수가 어려워짐
- MSA는 구조가 복잡하고 설계가 어려움. 대신 장애 전파가 줄고, 서비스 단위로 유연한 대응 가능
ㅍMSA는 팀 단위 분산 개발, 빠른 배포, 독립 확장이 가능한 구조

---

## 3. Spring MVC vs Spring Cloud 기반 MSA

- Spring MVC는 웹 애플리케이션 개발 프레임워크
- Controller → Service → Repository 구조
- 하나의 프로젝트 안에서 모든 기능을 처리
- 일반적으로 Monolith 구조에서 사용

- Spring Cloud는 MSA 구현을 위한 인프라 프레임워크
- 서비스 간 통신, 라우팅, 인증, 설정 관리 등 운영을 위한 기능 제공
- 각각의 서비스를 독립 애플리케이션으로 구성하고 연결함
- 대표적으로 Eureka, Gateway, Config Server, Feign 등을 사용함

---

## 4. Spring Cloud MSA 구성 요소

- **API Gateway**
  → 클라이언트의 요청을 받아서 내부 마이크로서비스로 전달
  → 요청 라우팅, 인증 필터링 등 처리 가능

- **Eureka (Service Registry)**
  → 각 서비스의 위치 정보를 저장
  → 서비스 간 통신 시 주소를 동적으로 찾을 수 있게 해줌
  
- **Spring Cloud Config**
  → 설정 파일을 중앙에서 관리
  → Git 저장소 연동 가능, 서비스별 설정 분리 가능

- **Feign Client**
  → 선언적 방식으로 REST API 호출
  → 서비스 간 통신을 인터페이스 기반으로 간단하게 처리

- **Sleuth + Zipkin**
  → 서비스 간 요청 흐름 추적
  → 어디서 문제가 발생했는지 로그를 통해 확인 가능

- **Spring Cloud Stream**
  → Kafka, RabbitMQ 등을 통해 비동기 메시지 기반 통신
  → 이벤트 기반 설계에 유리

---

## 5. 설계 시 고려할 점

- 서비스 경계를 명확하게 나눠야 함 (도메인 중심 설계 추천)
- 공통 로직은 최소화하고 최대한 서비스 간 결합을 줄이기
- 모든 요청은 Gateway를 통해 진입시키는 구조가 일반적
- 설정, 인증, 장애 추적 등 운영 측면도 함께 고려해야 함
- 로컬 테스트는 어렵기 때문에 Docker, CI/CD 등 인프라 지원이 중요함
